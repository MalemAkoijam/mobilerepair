
<style>
  select.form-select[multiple] {
    height: auto;
    min-height: 150px;
  }

</style>
<form method="post" class="card p-4 col-md-6 mx-auto shadow-sm fade-in-card">
  {% csrf_token %}

  <div class="mb-3">
    <label for="email" class="form-label">Email</label>
    <input type="email" name="email" value="{{ user_obj.email }}" class="form-control" required>
  </div>

  <div class="mb-3">
    <label for="first_name" class="form-label">First Name</label>
    <input type="text" name="first_name" value="{{ user_obj.first_name }}" class="form-control">
  </div>

  <div class="mb-3">
    <label for="last_name" class="form-label">Last Name</label>
    <input type="text" name="last_name" value="{{ user_obj.last_name }}" class="form-control">
  </div>

  <div class="mb-3">
    <label for="groups" class="form-label">Assign Groups</label>
    <select name="groups" id="groups" class="form-select" multiple>
      {% for group in all_groups %}
        <option value="{{ group.id }}" {% if group in user_obj.groups.all %}selected{% endif %}>
          {{ group.name }}
        </option>
      {% endfor %}
    </select>
    <small class="text-muted">Hold Ctrl (Windows) or Cmd (Mac) to select multiple groups.</small>
  </div>

  <div class="d-flex justify-content-between mt-3">
    <button type="submit" class="btn btn-success px-4">
      <i class="bi bi-check-circle me-1"></i> Update
    </button>
    <a href="{% url 'manage_users' %}" class="btn btn-secondary">
      <i class="bi bi-arrow-left me-1"></i> Cancel
    </a>
  </div>
</form>
