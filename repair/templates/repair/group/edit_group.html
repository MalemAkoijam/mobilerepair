{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Edit Group</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <style>
    .fade-in-card {
      animation: fadeInUp 0.6s ease forwards;
      opacity: 0;
      transform: translateY(20px);
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>
<body class="d-flex flex-column min-vh-100">
    {% include 'repair/header.html' %}
    <div class="d-flex flex-column min-vh-100">

  <div class="container py-5">
    <div class="card p-4 shadow-sm fade-in-card">
      <h3 class="mb-4 text-primary"><i class="bi bi-shield-lock-fill me-2"></i>Edit Group: {{ group.name }}</h3>
      <form method="post">
        {% csrf_token %}
        <div class="mb-3">
          <label for="groupName" class="form-label">Group Name</label>
          <input type="text" name="name" value="{{ group.name }}" class="form-control" required>
        </div>




        <div class="mb-3">
          <label class="form-label">Permissions</label>
          <select name="permissions" multiple class="form-select" size="10">
              {% regroup all_permissions by content_type.app_label as app_permissions %}
              {% for app in app_permissions %}
                <optgroup label="{{ app.grouper|capfirst }}">
                  {% for perm in app.list %}
                    <option value="{{ perm.id }}" {% if perm in group.permissions.all %}selected{% endif %}>
                      {{ perm.name }}
                    </option>
                  {% endfor %}
                </optgroup>
              {% endfor %}
          </select>
          <small class="text-muted">Hold Ctrl/Cmd to select multiple permissions.</small>
        </div>

        <div class="d-flex justify-content-between">
          <button type="submit" class="btn btn-success"><i class="bi bi-check-circle"></i> Save</button>
          <a href="{% url 'list_groups' %}" class="btn btn-secondary"><i class="bi bi-arrow-left"></i> Cancel</a>
        </div>
      </form>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
{% include 'repair/footer.html' %}
</body>
</html>
